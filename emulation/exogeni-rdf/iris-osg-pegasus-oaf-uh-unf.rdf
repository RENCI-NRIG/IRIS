<rdf:RDF
    xmlns:ec2="http://geni-orca.renci.org/owl/ec2.owl#"
    xmlns:kansei="http://geni-orca.renci.org/owl/kansei.owl#"
    xmlns:app-color="http://geni-orca.renci.org/owl/app-color.owl#"
    xmlns:geni="http://geni-orca.renci.org/owl/geni.owl#"
    xmlns:domain="http://geni-orca.renci.org/owl/domain.owl#"
    xmlns:eucalyptus="http://geni-orca.renci.org/owl/eucalyptus.owl#"
    xmlns:j.0="http://geni-orca.renci.org/owl/storage.owl#"
    xmlns:collections="http://geni-orca.renci.org/owl/collections.owl#"
    xmlns:openflow="http://geni-orca.renci.org/owl/openflow.owl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:exogeni="http://geni-orca.renci.org/owl/exogeni.owl#"
    xmlns:layer="http://geni-orca.renci.org/owl/layer.owl#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:request-schema="http://geni-orca.renci.org/owl/request.owl#"
    xmlns:ip4="http://geni-orca.renci.org/owl/ip4.owl#"
    xmlns:planetlab="http://geni-orca.renci.org/owl/planetlab.owl#"
    xmlns:ethernet="http://geni-orca.renci.org/owl/ethernet.owl#"
    xmlns:dtn="http://geni-orca.renci.org/owl/dtn.owl#"
    xmlns:time="http://www.w3.org/2006/time#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:modify-schema="http://geni-orca.renci.org/owl/modify.owl#"
    xmlns:compute="http://geni-orca.renci.org/owl/compute.owl#"
    xmlns:request="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#"
    xmlns:topology="http://geni-orca.renci.org/owl/topology.owl#"
    xmlns:orca="http://geni-orca.renci.org/owl/orca.rdf#" > 
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-JacksonvilleRouter-ip-10-100-54-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.54.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-KansasCityRouter-ip-10-100-12-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.12.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-router-n1-ip-192-168-92-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LARouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LARouter-ip-10-100-33-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-router-n0-ip-192-168-44-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-CacheCal">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-CacheCal-ip-192-168-23-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#RaleighRouter">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CharlotteRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-RaleighRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-RaleighRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasGUID>4cc28a86-5b1a-4f13-9236-ceb1a34f584c</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-Cleveland-ip-10-100-87-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.87.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SeattleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SeattleRouter-ip-10-100-10-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3"/>
    <topology:hasGUID>228a2eb2-e106-457c-aef3-9f27007b127e</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-LasVegasRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-LasVegasRouter-ip-10-100-34-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-compute-c0-ip-192-168-67-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-compute-c1-ip-192-168-18-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LARouter-ip-10-100-33-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.33.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#FNALRouter">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-FNALRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-FNALRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-FNALRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#UChicagoRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasGUID>46ffc5f2-80d4-4be9-b2fb-5131ee12cda9</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-FNALRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-KansasCityRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-KansasCityRouter-ip-10-100-5-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#WashingtonRouter">
    <topology:hasGUID>12c32bc6-c260-4089-b8ba-05b82dcda6e8</topology:hasGUID>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#RaleighRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-WashingtonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-WashingtonRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-WashingtonRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-router-n0-ip-192-168-43-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.43.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ChicEQCHRouter">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#KansasCityRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-ChicEQCHRouter"/>
    <topology:hasGUID>1c2295a6-6013-487f-b0d3-590697acb8b2</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-ChicEQCHRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-ChicEQCHRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-ChicEQCHRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-router-n1-ip-192-168-90-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.90.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MinneapolisRouter-ip-10-100-47-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.47.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-JacksonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-JacksonRouter-ip-10-100-55-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Storage0">
    <j.0:hasMntPoint rdf:datatype="http://www.w3.org/2001/XMLSchema#string">/mnt/target</j.0:hasMntPoint>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/storage.owl#ISCSI"/>
    <topology:hasGUID>62022a09-5d33-4084-8258-46a22b257254</topology:hasGUID>
    <j.0:hasFSParam rdf:datatype="http://www.w3.org/2001/XMLSchema#string">-F -b 2048</j.0:hasFSParam>
    <j.0:hasFSType rdf:datatype="http://www.w3.org/2001/XMLSchema#string">ext4</j.0:hasFSType>
    <j.0:storageCapacity rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">3000</j.0:storageCapacity>
    <j.0:doFormat rdf:datatype="http://www.w3.org/2001/XMLSchema#boolean">true</j.0:doFormat>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32-Storage0"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/storage.owl#LUN"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-NewYorkRouter-ip-192-168-4-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.4.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-submit-ip-192-168-92-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkDomain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-router-n1-ip-192-168-91-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.91.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-staging"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-router-n2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>13c8d691-72f7-4194-99d3-8fe829de3b1d</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0"/>
    <topology:hasGUID>764202e3-46c0-4436-8788-0529a0bc96e4</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-Cleveland-ip-10-100-86-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.86.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-DenverRouter-ip-10-100-7-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.7.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginNCSA">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-OriginNCSA"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TucsonRouter"/>
    <topology:hasGUID>fdf338d2-14c1-4113-902d-0b46bb12d155</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $TucsonRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-staging-ip-192-168-19-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-ucsd-router-n3-ip-172-16-60-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-CacheBNL-ip-192-168-6-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.6.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-unl-router-n1-ip-172-16-72-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.72.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-LARouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-LARouter-ip-10-100-31-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-LARouter-ip-10-100-38-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.38.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-ELPasoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-ELPasoRouter-ip-10-100-13-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-router-n3-ip-192-168-66-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-WashingtonRouter-ip-10-100-78-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.78.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-router-n1-ip-192-168-92-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.92.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-router-n1-ip-192-168-91-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-ELPasoRouter-ip-10-100-2-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.2.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MinneapolisRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MinneapolisRouter-ip-10-100-47-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-TucsonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-TucsonRouter-ip-192-168-15-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-compute-c1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-router-n2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>832ea2fe-808c-40c2-96e6-f44c40bab433</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-ChicEQCHRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-ChicEQCHRouter-ip-10-100-12-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-router-n0-ip-192-168-45-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-NewYorkRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-NewYorkRouter-ip-10-100-82-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-IndianapolisRouter-ip-10-100-58-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.58.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TermDuration">
    <time:days rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal">1</time:days>
    <rdf:type rdf:resource="http://www.w3.org/2006/time#DurationDescription"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-WashingtonRouter-ip-10-100-89-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.89.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-router-n3-ip-192-168-69-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-PittRouter-ip-10-100-87-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.87.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3"/>
    <topology:hasGUID>82f1e506-5723-47f4-a394-d21f33ae2ece</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-compute-c1-ip-192-168-39-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkDomain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-OriginFNAL"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-FNALRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>373e90ef-5eba-43a7-ab8c-9805991471b2</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-EugeneRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-PortlandRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>c76edfd0-6586-4ce6-a30b-8090d171cc75</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MissoulaRouter">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>0231dc5c-488b-462c-8a88-16778c7511b2</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SeattleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MissoulaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-MissoulaRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-UChicagoRouter-ip-10-100-86-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.86.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-DallasRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-DallasRouter-ip-10-100-50-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HoustonRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-HoustonRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ELPasoRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>a65a4433-9d65-4147-8cfc-8cd7ce416a01</topology:hasGUID>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-HoustonRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-HoustonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-HoustonRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheCal">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-CacheCal"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LARouter"/>
    <topology:hasGUID>1f5055c3-ec11-4959-90f0-b5ade757a740</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $LARouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-cache">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-cache-ip-192-168-65-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0"/>
    <topology:hasGUID>31f236de-00c8-4d5c-9bfb-910d8f33eb86</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-SeattleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-SeattleRouter-ip-10-100-8-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-TucsonRouter-ip-10-100-40-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.40.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-SDRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-SDRouter-ip-10-100-38-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-SunnyvaleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-SunnyvaleRouter-ip-10-100-30-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-BatonRougeRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-HoustonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>c6aa9d08-f183-4831-bc32-510e470aa9c7</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-CacheFNAL"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-FNALRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>64b25075-5660-4d88-9983-e2b4c2dd312c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginCal">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-OriginCal"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LARouter"/>
    <topology:hasGUID>d62abb52-6bf4-4dc3-ba2d-cb108dbd8a60</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $LARouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ELPasoRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-ELPasoRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>db50f928-5e59-4bb0-bf70-a82f85c4a4c6</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-ELPasoRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-ELPasoRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TucsonRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-Cleveland-ip-10-100-85-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.85.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-OriginFNAL-ip-192-168-17-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.17.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LouisvilleRouter">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasGUID>1f8f869b-97c8-4553-a182-8fcdc3464123</topology:hasGUID>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#JacksonRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-LouisvilleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-LouisvilleRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-NewYorkRouter-ip-10-100-82-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.82.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-OriginCal">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-OriginCal-ip-192-168-22-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-ELPasoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-ELPasoRouter-ip-10-100-2-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-compute-c1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>c549a80b-cf23-452c-b1e8-8703aca0ac30</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-OriginNCSA"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-TucsonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>ca6062f7-dd86-4d54-9c12-0c7908bdb7e6</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-BatonRougeRouter-ip-10-100-52-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.52.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-HoustonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-ELPasoRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>8ef46008-e52b-4005-9727-f501c31c9e6c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-SDRouter-ip-10-100-40-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.40.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-syr-router-n2-ip-172-16-20-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.20.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-router-n3-ip-192-168-65-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.65.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-Cleveland">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-Cleveland-ip-10-100-86-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-submit-ip-192-168-21-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TulsaRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-TulsaRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#DallasRouter"/>
    <topology:hasGUID>95e371c8-1b03-4a18-9994-dc5dc46c1e6d</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-TulsaRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-OriginSeattle-ip-192-168-11-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.11.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-staging-ip-192-168-74-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.74.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NewYorkRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NewYorkRouter-ip-10-100-81-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-router-n0-ip-192-168-42-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.42.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-RaleighRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-RaleighRouter-ip-10-100-76-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PensacolaRouter">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#BatonRougeRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-PensacolaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-PensacolaRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasGUID>065d8aa0-7beb-49de-acbb-9bf07ec58b9e</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NYCRouter">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PhillyRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-NYCRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NYCRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NYCRouter"/>
    <topology:hasGUID>25965427-5d26-44ee-aa26-26a1ae423d09</topology:hasGUID>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-compute-c0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-router-n2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>364952bc-d6a6-4153-8bc5-3f69ffc7c321</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-SDRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-LARouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>80fa9f6e-7ca9-4d14-9cc9-8878f04edcab</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-FNALRouter-ip-10-100-63-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.63.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-CacheFNAL-ip-192-168-16-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.16.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-CincinnatiRouter-ip-10-100-56-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.56.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-SunnyvaleRouter-ip-10-100-30-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.30.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-submit-ip-192-168-44-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.44.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-HoustonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-HoustonRouter-ip-10-100-50-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-AshburnRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-AshburnRouter-ip-10-100-89-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-PensacolaRouter-ip-10-100-54-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.54.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-TucsonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-ELPasoRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>e1fecf7f-f612-4e32-96d8-33936aa4b385</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-cache"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-router-n2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>a90e3ec0-2db4-4d3d-bf70-3b26de47d774</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheBNL">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-CacheBNL"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HartfordRouter"/>
    <topology:hasGUID>086eab16-57d8-431d-a874-de91d2b91898</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $HartfordRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-LARouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-LARouter-ip-192-168-22-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0"/>
    <topology:hasGUID>85b76f65-089c-450e-a83c-71d748f91476</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#KansasCityRouter">
    <topology:hasGUID>f458477e-42a1-43fe-a84b-5b7e084b85a8</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-KansasCityRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-KansasCityRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-KansasCityRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-KansasCityRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-KansasCityRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-AtlantaRouter-ip-10-100-68-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.68.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-compute-c0-ip-192-168-42-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-cache">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-cache-ip-192-168-25-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-RenoRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-SunnyvaleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>41ef1031-9c38-44f4-b0c5-87c06d84fc81</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-DallasRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-TulsaRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>5540f145-27fe-4503-aa58-048ef2b28883</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-UChicagoRouter-ip-10-100-61-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.61.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SaltLakeRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-SaltLakeRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-SaltLakeRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SaltLakeRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-SaltLakeRouter"/>
    <topology:hasGUID>4cf9a77e-76eb-4e04-84ba-878acaabb046</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#control">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32-control"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Storage0"/>
    <topology:hasGUID>4a481e30-95e1-488a-ac36-2eca4f6c65a3</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">
#!/bin/bash

cd /root
git clone -b storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git

wget -O - https://repo.saltstack.com/py3/ubuntu/18.04/amd64/latest/SALTSTACK-GPG-KEY.pub | sudo apt-key add -
echo "deb http://repo.saltstack.com/py3/ubuntu/18.04/amd64/latest bionic main" &gt; /etc/apt/sources.list.d/saltstack.list
apt-get -y update

until apt-get -y install salt-master
do
        echo "installing salt-master" &gt;&gt; /root/tmp
        sleep 5s
done

echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash

while !(salt-key -L | grep syr-router-n2) || !(salt-key -L | grep unl-router-n1) || !(salt-key -L | grep ucsd-router-n3) || !(salt-key -L | grep uc-router-n0) || !(salt-key -L | grep syr-compute-c1) || !(salt-key -L | grep syr-compute-c0) || !(salt-key -L | grep unl-compute-c1) || !(salt-key -L | grep unl-compute-c0) || !(salt-key -L | grep ucsd-compute-c1) || !(salt-key -L | grep ucsd-compute-c0) || !(salt-key -L | grep uc-compute-c0) || !(salt-key -L | grep uc-compute-c1) || !(salt-key -L | grep uc-staging) || !(salt-key -L | grep uc-submit) || !(salt-key -L | grep syr-staging) || !(salt-key -L | grep syr-submit) || !(salt-key -L | grep ucsd-staging) || !(salt-key -L | grep ucsd-submit) || !(salt-key -L | grep unl-staging) || !(salt-key -L | grep unl-submit) || !(salt-key -L | grep unl-cache) || !(salt-key -L | grep uc-cache) || !(salt-key -L | grep syr-cache) || !(salt-key -L | grep ucsd-cache)
do
sleep 5s
echo "saltstack not ready, sleep 5s" &gt;&gt; /root/tmp
done

sleep 1m
salt-key -L &gt;&gt; /root/tmp
salt-key -y -A &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-CacheSeattle"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-SeattleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>09e7bb6e-bfb7-4f6f-8b7b-c5268a756493</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-SaltLakeRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-RenoRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9e3fb838-07b1-4157-bb2e-b053f2f342fe</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AlbanyRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-AlbanyRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Cleveland"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-AlbanyRouter"/>
    <topology:hasGUID>485443cd-4ccb-4ff3-a968-1b5538ef7b1e</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-AlbanyRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-ChicEQCHRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-KansasCityRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9eb13431-d4cf-46a3-8790-704b37c241ae</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-FNALRouter-ip-10-100-62-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.62.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-CharlotteRouter-ip-10-100-76-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.76.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SeattleRouter">
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-SeattleRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-SeattleRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-SeattleRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <topology:hasGUID>d903497f-e9d6-40d7-8106-80780993cdf5</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SeattleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-SeattleRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-UChicagoRouter-ip-10-100-62-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.62.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-router-n2-ip-192-168-21-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.21.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NYCRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NYCRouter-ip-10-100-80-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-router-n2-ip-192-168-21-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-TucsonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-TucsonRouter-ip-10-100-40-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-TulsaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-KansasCityRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>fbab6c15-4191-4f99-822c-4565364257c0</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-LARouter-ip-10-100-31-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.31.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NewYorkRouter">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-NewYorkRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NewYorkRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-NewYorkRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NYCRouter"/>
    <topology:hasGUID>ce3c2268-3e94-4d34-8925-4146b21274ff</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NewYorkRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-SunnyvaleRouter-ip-10-100-31-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.31.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-OriginNCSA">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-OriginNCSA-ip-192-168-15-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-RaleighRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-RaleighRouter-ip-10-100-77-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LasVegasRouter-ip-10-100-33-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.33.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32-Storage0">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-DenverRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-DenverRouter-ip-10-100-1-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MinneapolisRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MissoulaRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>be83ebaa-f81a-411e-8b04-96565f387e0c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-compute-c1-ip-192-168-70-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.70.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-router-n3"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SDRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-router-n3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasGUID>47d63764-5a31-4ca2-a305-bad9a81711a1</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-router-n3"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-OriginSeattle"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-SeattleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>ff2e1d07-96e1-43a7-8363-3029a0ad7fc9</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-CacheCal"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-LARouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>15f74c0d-502d-4955-9541-9b757f3e121a</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-TulsaRouter-ip-10-100-49-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.49.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-router-n0-ip-192-168-39-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.39.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CincinnatiRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-CincinnatiRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>3fb806a3-c135-4f1b-9ab6-5f4733c5a932</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-CincinnatiRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LouisvilleRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-WashingtonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-WashingtonRouter-ip-10-100-77-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-AshburnRouter-ip-10-100-89-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.89.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-cache">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-cache"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-router-n2"/>
    <topology:hasGUID>7dcd580d-3400-4b95-befc-d8c7b3bf928c</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-compute-c0-ip-192-168-90-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-router-n3-ip-192-168-65-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NewYorkRouter-ip-10-100-80-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.80.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3"/>
    <topology:hasGUID>7b25b2a9-4066-4498-8b41-6de5b1adec0a</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-HoustonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-HoustonRouter-ip-10-100-28-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-IndianapolisRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-IndianapolisRouter-ip-10-100-58-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginSeattle">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-OriginSeattle"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SeattleRouter"/>
    <topology:hasGUID>b7beb18b-d761-45ab-afb9-2e8e9dd47e71</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $SeattleRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-AlbanyRouter-ip-10-100-84-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.84.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-UChicagoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-UChicagoRouter-ip-172-16-46-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-LouisvilleRouter-ip-10-100-56-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.56.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-UChicagoRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3c78500d-1d20-498f-be9b-9789070e92e5</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-ChicEQCHRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-IndianapolisRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>482d5e75-7a28-4aa2-8e7c-09d7af1f07e6</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-LARouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-OriginCal"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>c81b28a0-dbef-41b7-92e5-5b4fb4cdd928</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-SaltLakeRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-LasVegasRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d5c25a6c-6b42-4131-8457-1ee28342bbd2</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SeattleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SaltLakeRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3c1a7330-a5cb-4024-b69d-18a091803ec8</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-DenverRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-DenverRouter-ip-10-100-7-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-uc-router-n0-ip-172-16-46-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#DallasRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-DallasRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-DallasRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HoustonRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <topology:hasGUID>b01f9e89-a810-43d2-86c8-c2fc7b6ae1b0</topology:hasGUID>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-AlbanyRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-AlbanyRouter-ip-172-16-20-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LARouter">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-LARouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasGUID>91f8b495-4dc9-4fae-93c6-8fa50abbbcda</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-LARouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-LARouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-LARouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SunnyvaleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LARouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-compute-c1-ip-192-168-91-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-JacksonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-JacksonRouter-ip-10-100-51-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-HoustonRouter-ip-10-100-50-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.50.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-TucsonRouter-ip-10-100-13-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.13.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-DallasRouter-ip-10-100-49-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.49.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-SaltLakeRouter-ip-10-100-7-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.7.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-IndianapolisRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-CincinnatiRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>b4752907-e2d4-4a92-8e0a-601b1362fa55</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-staging"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2b8e8b98-e5b6-49c0-9157-65102ff402a8</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LasVegasRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LARouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d1e08365-2d21-4b40-8cf1-fcbdfd586bb4</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-UChicagoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-UChicagoRouter-ip-10-100-61-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-cache"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>a80b9eb7-e428-4b68-9ebd-25f516df0bf6</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-RaleighRouter-ip-10-100-76-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.76.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-submit"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-router-n2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>94e0f184-deaa-48b1-98eb-48aa73d0d655</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-cache-ip-192-168-65-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.65.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-BatonRougeRouter-ip-10-100-28-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.28.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-HoustonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-HoustonRouter-ip-10-100-51-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-EugeneRouter-ip-10-100-29-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.29.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-DallasRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-DallasRouter-ip-10-100-49-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-TucsonRouter-ip-192-168-15-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.15.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-UChicagoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-UChicagoRouter-ip-10-100-64-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-ChicEQCHRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-ChicEQCHRouter-ip-10-100-63-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1"/>
    <topology:hasGUID>9ae9e32e-45b5-4d45-bbed-8319028fb63a</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-compute-c0-ip-192-168-26-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.26.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-SeattleRouter-ip-192-168-24-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.24.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NewYorkRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NewYorkRouter-ip-10-100-80-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-CacheBNL">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-CacheBNL-ip-192-168-6-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-AtlantaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-JacksonvilleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>bb699b25-6376-44ec-b268-2c906d307c00</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-KansasCityRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-KansasCityRouter-ip-10-100-1-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-submit"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9e4d5dce-1658-4030-9a0f-09deaac57adb</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-CacheBNL"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-HartfordRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>87e179aa-b0c4-4738-a26c-8069e9b1d20c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-CincinnatiRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-LouisvilleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9b73b142-15e5-4e63-a558-815d12c0d7fe</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-MinneapolisRouter-ip-10-100-5-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.5.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-KansasCityRouter-ip-10-100-1-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.1.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-AlbanyRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>25e24676-a5bf-483d-9c6a-926340c00835</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32-control"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32-Storage0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2bc3757a-d57a-4c03-b861-1e3d537cbd12</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-ELPasoRouter-ip-10-100-13-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.13.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-FNALRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-FNALRouter-ip-10-100-62-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-PhillyRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-PhillyRouter-ip-10-100-78-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-CincinnatiRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-CincinnatiRouter-ip-10-100-57-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-Cleveland">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-Cleveland-ip-10-100-85-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-RenoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-RenoRouter-ip-10-100-36-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-AshburnRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-AshburnRouter-ip-10-100-88-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-ChicEQCHRouter-ip-10-100-63-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.63.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CharlotteRouter">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-CharlotteRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AtlantaRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-CharlotteRouter"/>
    <topology:hasGUID>2c9502ac-34ae-4b29-828f-3451d0b74e97</topology:hasGUID>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-staging-ip-192-168-43-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.43.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NYCRouter-ip-10-100-80-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.80.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-PensacolaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-PensacolaRouter-ip-10-100-54-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-HartfordRouter-ip-192-168-6-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.6.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Term">
    <time:hasDurationDescription rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TermDuration"/>
    <rdf:type rdf:resource="http://www.w3.org/2006/time#Interval"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NYCRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NYCRouter-ip-10-100-81-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-DenverRouter-ip-10-100-2-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.2.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-router-n0-ip-192-168-43-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-SDRouter-ip-10-100-38-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.38.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-MinneapolisRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-KansasCityRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>252484e8-a930-4f4d-ad6b-89b0258f1b27</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-SeattleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-SeattleRouter-ip-192-168-11-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-PittRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-PittRouter-ip-10-100-87-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-NYCRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-PhillyRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>7c3829de-2b7e-4e3e-9f9c-ce6ffdd4d076</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-NewYorkRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-NewYorkRouter-ip-192-168-4-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-compute-c0-ip-192-168-90-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.90.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-LouisvilleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-JacksonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2250e176-55b9-46d9-8f67-b6196d7ac0e8</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-compute-c0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>1446d3f7-70a7-472e-91e0-95ef10fddb68</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-LARouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-SunnyvaleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>567b9dc5-4010-4e2a-a888-35bbeb104620</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-WashingtonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-WashingtonRouter-ip-10-100-78-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-PortlandRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-PortlandRouter-ip-10-100-29-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-staging"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>1a7fc894-6310-40ef-93dd-c9e6e717b3d8</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-UChicagoRouter-ip-172-16-46-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.46.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-FNALRouter-ip-192-168-17-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.17.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-router-n0-ip-192-168-44-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.44.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-CacheSeattle-ip-192-168-24-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.24.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-DenverRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-DenverRouter-ip-10-100-2-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-FNALRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-FNALRouter-ip-192-168-17-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AshburnRouter">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasGUID>c517811b-ef37-49ca-9816-8623795018bf</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-AshburnRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#WashingtonRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-AshburnRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32-control">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-router-n2">
    <topology:hasGUID>a13176c0-8d5f-4dd5-8aa5-e8b75e6c888f</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-router-n2"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-router-n2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-router-n2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AlbanyRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-PortlandRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-SeattleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>766ccb13-a3b0-46b6-827f-fc58541b4927</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#JacksonRouter">
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-JacksonRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-JacksonRouter"/>
    <topology:hasGUID>5f9ce95f-afbc-4a3b-8190-caf8278349b9</topology:hasGUID>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp


</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-JacksonRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HoustonRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-SeattleRouter-ip-10-100-0-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.0.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-router-n0-ip-192-168-42-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-submit"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>4f8d281f-ee72-42ca-8e16-eba1528accfa</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-PhillyRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-WashingtonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>aafaa47c-504f-44a6-9b6a-ac46815a47b9</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-compute-c0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>64c0abe9-a94c-44f2-8f00-e2c476250c85</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-JacksonvilleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-PensacolaRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>39a2d8bb-1484-4a9c-b0e3-e24bac357456</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-SunnyvaleRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-EugeneRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>21b6f99a-3607-4568-b225-f61e76a04f3b</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-AtlantaRouter-ip-10-100-71-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.71.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-EugeneRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-EugeneRouter-ip-10-100-29-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-KansasCityRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-KansasCityRouter-ip-172-16-72-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PortlandRouter">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <topology:hasGUID>43d95ed3-9718-4e1f-ba29-2ab81877b51e</topology:hasGUID>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SeattleRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-PortlandRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-PortlandRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-router-n2"/>
    <topology:hasGUID>3104b906-1373-4566-bcf7-754b9c04cb51</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-router-n1-ip-192-168-90-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#BostonRouter">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HartfordRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-BostonRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasGUID>4779af6e-7a0c-4800-9e7d-43289a7bbd62</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-BostonRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-RenoRouter-ip-10-100-36-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.36.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-syr-router-n2-ip-172-16-20-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-PhillyRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-PhillyRouter-ip-10-100-79-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SeattleRouter-ip-10-100-10-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.10.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-WashingtonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-RaleighRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>78bd8606-9804-4786-8774-7c364c31674b</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-DenverRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-SaltLakeRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>370fd319-bc91-405e-8ff0-a01bc965e055</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-WashingtonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-AshburnRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>7779bb71-2048-444e-b3d9-948a2f343fa2</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-OriginCal-ip-192-168-22-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.22.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-HartfordRouter-ip-10-100-83-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.83.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-CacheFNAL">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-CacheFNAL-ip-192-168-16-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-cache"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3da93008-6e3a-492e-bbe8-30c8ec221f05</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-WashingtonRouter-ip-10-100-77-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.77.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SunnyvaleRouter">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasGUID>948c8a82-78e6-4108-986c-79a141f0def1</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-SunnyvaleRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-SunnyvaleRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-SunnyvaleRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#RenoRouter">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-RenoRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SunnyvaleRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>1fd576af-c682-4a18-88ee-ec67be2fcac2</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-RenoRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-JacksonRouter-ip-10-100-71-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.71.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-KansasCityRouter-ip-172-16-72-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.72.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-KansasCityRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-KansasCityRouter-ip-10-100-12-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-router-n3-ip-192-168-70-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.70.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-PortlandRouter-ip-10-100-29-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.29.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-SunnyvaleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31-SunnyvaleRouter-ip-10-100-31-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-router-n0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#UChicagoRouter"/>
    <topology:hasGUID>3502077f-c6ba-41ca-8504-10c996d47b3b</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-uc-router-n0"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-router-n0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-router-n0"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-router-n0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-router-n0"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-DenverRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-ELPasoRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>e7404f1b-d273-4148-a896-ce7eb77bcc88</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-MinneapolisRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-MinneapolisRouter-ip-10-100-64-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-AshburnRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-PittRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>4ef26e8c-775b-45ea-85d7-45f492a338e7</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-UChicagoRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-MinneapolisRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>44560338-492c-4797-b467-1bf4129c368f</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-RaleighRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-CharlotteRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>277538ca-1b5a-403e-8139-09d9f3e37a87</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-TucsonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-SDRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>8f40939c-d48d-43fc-9315-b1a4067855cc</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-PensacolaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-BatonRougeRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>fcbd19b5-1e96-406c-b275-b2a603379602</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-router-n2-ip-192-168-25-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LasVegasRouter">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SaltLakeRouter"/>
    <topology:hasGUID>889a7df3-d246-49de-a816-db1d2826b794</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LasVegasRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-LasVegasRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-BatonRougeRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-BatonRougeRouter-ip-10-100-28-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-JacksonvilleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-JacksonvilleRouter-ip-10-100-68-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkDomain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-WashingtonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89-WashingtonRouter-ip-10-100-89-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-PhillyRouter-ip-10-100-79-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.79.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-router-n1-ip-192-168-74-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-DenverRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-KansasCityRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>a0010898-24ac-4142-8099-c10dead2c006</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-SaltLakeRouter-ip-10-100-36-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.36.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-BostonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-BostonRouter-ip-10-100-83-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-HoustonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-DallasRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3eea22f0-3686-45eb-aff1-66b7bc6cf459</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-cache-ip-192-168-73-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.73.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-OriginSeattle">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-OriginSeattle-ip-192-168-11-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-AtlantaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-AtlantaRouter-ip-10-100-75-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-LouisvilleRouter-ip-10-100-55-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.55.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-CharlotteRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-AtlantaRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9529c7e5-1ee2-420d-a5b4-bce1ec9e8c09</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-PittRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-Cleveland"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>61f5b861-96fb-4236-b83a-18481a3a4f1c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-NYCRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-NYCRouter-ip-10-100-79-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-JacksonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-HoustonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>dceff131-cc8e-4e74-948e-92e93596d822</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-FNALRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-ChicEQCHRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3fb17acd-f3d8-4026-abf7-c6199ed3d650</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#">
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CincinnatiRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ELPasoRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AlbanyRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-cache"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#UChicagoRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TulsaRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#BatonRougeRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#RaleighRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PortlandRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#RenoRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TucsonRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#IndianapolisRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LasVegasRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SDRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginCal"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-router-n2"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MissoulaRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LARouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SaltLakeRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheCal"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginNCSA"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SunnyvaleRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link32"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-cache"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69"/>
    <request-schema:hasTerm rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Term"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Storage0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#FNALRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheFNAL"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NewYorkRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#EugeneRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheBNL"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Cleveland"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginFNAL"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#JacksonvilleRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#DallasRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#JacksonRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AtlantaRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginSeattle"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#KansasCityRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheNYU"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#LouisvilleRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CharlotteRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SeattleRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MinneapolisRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HoustonRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-cache"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PittRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AshburnRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#control"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link89"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NYCRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-cache"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#BostonRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ChicEQCHRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link31"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PhillyRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#WashingtonRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/request.owl#Reservation"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HartfordRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PensacolaRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#DenverRouter"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheSeattle"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-compute-c1"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-router-n2-ip-192-168-19-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-staging-ip-192-168-69-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-router-n2-ip-192-168-19-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.19.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-UChicagoRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-ChicEQCHRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>07a7fc17-2d5f-4ee7-8d0c-e4a581d4c5c1</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-AlbanyRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-AlbanyRouter-ip-10-100-84-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-CacheNYU"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-NewYorkRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>194854ea-6104-4f04-86ba-745c120d149f</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-JacksonvilleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-JacksonvilleRouter-ip-10-100-54-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-staging-ip-192-168-43-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MinneapolisRouter">
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MinneapolisRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-MinneapolisRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-MinneapolisRouter"/>
    <topology:hasGUID>380c1584-83a1-4579-9455-ce467055a63a</topology:hasGUID>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MissoulaRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-ELPasoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-ELPasoRouter-ip-10-100-27-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-Cleveland"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-UChicagoRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>be118d8f-c7e9-415b-b4de-d87002cef268</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-FNALRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-UChicagoRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d0d7b260-4d20-4174-8fa0-4c7cc2439b34</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-LARouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-LARouter-ip-192-168-23-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-staging"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-router-n1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2f573d20-8792-473e-ab3d-d031776d15de</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-BatonRougeRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-BatonRougeRouter-ip-10-100-52-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-SaltLakeRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link36-SaltLakeRouter-ip-10-100-36-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-OriginNCSA-ip-192-168-15-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.15.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-router-n2-ip-192-168-26-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-SaltLakeRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-SaltLakeRouter-ip-10-100-7-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-submit-ip-192-168-92-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.92.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-SDRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-ucsd-router-n3"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>ab18e13d-043d-48f8-987c-0e816e6729b3</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-HartfordRouter-ip-10-100-82-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.82.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-KansasCityRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>0d2d3643-63b3-43fb-8498-ae95034d5a06</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-HartfordRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-HartfordRouter-ip-192-168-6-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-CincinnatiRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-CincinnatiRouter-ip-10-100-56-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3"/>
    <topology:hasGUID>f4f228a0-a9b8-44e7-9890-2b8b50da65f9</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-IndianapolisRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-IndianapolisRouter-ip-10-100-57-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-SunnyvaleRouter-ip-10-100-37-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.37.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-RenoRouter-ip-10-100-37-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.37.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-cache"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-router-n1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>bb6ba0e0-e07d-424a-9cc9-454abebbbf0d</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-Cleveland"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-AlbanyRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2b8affe3-8115-4599-9f6b-b8c9440e379d</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-HoustonRouter-ip-10-100-27-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.27.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-cache">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link65-ucsd-cache"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ucsd-router-n3"/>
    <topology:hasGUID>ec849adf-daf8-45fa-9e7b-58a3cab685e5</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Cleveland">
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-Cleveland"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasGUID>3e677e22-07bc-4593-a0e3-dee8693e4b0e</topology:hasGUID>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PittRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-Cleveland"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-Cleveland"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-router-n0-ip-192-168-39-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link44-uc-submit-ip-192-168-44-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-cache-ip-192-168-45-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.45.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SaltLakeRouter-ip-10-100-10-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.10.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-ELPasoRouter-ip-10-100-27-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.27.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-AtlantaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-AtlantaRouter-ip-10-100-68-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-AtlantaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-JacksonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>1fc3d9f1-b0e0-47ed-b1c9-42abde1e7ce6</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-FNALRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link63-FNALRouter-ip-10-100-63-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-BostonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-HartfordRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3afc42c3-26d4-400c-9c51-5964a2fd13f7</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link77-RaleighRouter-ip-10-100-77-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.77.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-BostonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-BostonRouter-ip-10-100-84-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-ucsd-router-n3-ip-172-16-60-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.60.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-SDRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-SDRouter-ip-172-16-60-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-CacheNYU">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-CacheNYU-ip-192-168-4-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MissoulaRouter-ip-10-100-47-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.47.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-AlbanyRouter-ip-10-100-85-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.85.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-AlbanyRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-BostonRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9ff1dcd1-edb0-4d07-8b9b-7d14fcc9344d</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-JacksonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-JacksonRouter-ip-10-100-71-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-MissoulaRouter-ip-10-100-0-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.0.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-RenoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-RenoRouter-ip-10-100-37-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-router-n1-ip-192-168-73-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-LARouter-ip-192-168-23-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.23.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-PensacolaRouter-ip-10-100-52-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.52.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-SDRouter-ip-172-16-60-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.60.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1">
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <topology:hasGUID>6f3c91c0-2666-4373-badb-79092dcb8066</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-router-n1"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-router-n1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-router-n1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#KansasCityRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-router-n1"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-HartfordRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-NewYorkRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>5dc4abfd-2d36-4459-830b-954ff2e3fb1d</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-router-n2-ip-192-168-18-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link12-ChicEQCHRouter-ip-10-100-12-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.12.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-compute-c1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d2401351-2497-495f-a9aa-24ba85e91d8a</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-PittRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-PittRouter-ip-10-100-88-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-SeattleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-SeattleRouter-ip-192-168-24-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-PhillyRouter-ip-10-100-78-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.78.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-KansasCityRouter-ip-10-100-5-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.5.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-JacksonRouter-ip-10-100-51-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.51.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SaltLakeRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link10-SaltLakeRouter-ip-10-100-10-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-ChicEQCHRouter-ip-10-100-61-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.61.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-compute-c0-ip-192-168-67-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.67.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AtlantaRouter">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasGUID>e80d33b4-612a-48c3-ab46-4975dc069e10</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-AtlantaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-AtlantaRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#JacksonvilleRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $CacheUNLRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-AtlantaRouter"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-router-n3-ip-192-168-67-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.67.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-staging-ip-192-168-74-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-FNALRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-FNALRouter-ip-192-168-16-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-MissoulaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-MissoulaRouter-ip-10-100-0-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-router-n3-ip-192-168-66-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.66.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-JacksonvilleRouter-ip-10-100-68-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.68.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-MissoulaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-SeattleRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>591be294-519c-4dad-bf36-ac5a09b80086</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NewYorkRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NYCRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d348fbd3-bc5d-478b-b6bc-12475c13b73b</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-SaltLakeRouter-ip-10-100-34-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.34.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#JacksonvilleRouter">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PensacolaRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link68-JacksonvilleRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link54-JacksonvilleRouter"/>
    <topology:hasGUID>77419e49-8e5e-42a2-b388-1ac9430bfb6a</topology:hasGUID>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-JacksonRouter-ip-10-100-55-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.55.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HartfordRouter">
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NewYorkRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link6-HartfordRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-HartfordRouter"/>
    <topology:hasGUID>228169f0-87fe-47f3-88cb-9375422206df</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-HartfordRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-router-n3-ip-192-168-70-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-ChicEQCHRouter-ip-10-100-58-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.58.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-UChicagoRouter-ip-10-100-64-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.64.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-router-n2"/>
    <topology:hasGUID>6a77aa72-f8d2-4295-a4b0-63887cf245d7</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-TulsaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link49-TulsaRouter-ip-10-100-49-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-compute-c1-ip-192-168-91-2">
    <ip4:netmask>192.0.0.0</ip4:netmask>
    <layer:label_ID>192.168.91.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link21-syr-submit-ip-192-168-21-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.21.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link67-ucsd-router-n3-ip-192-168-67-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NewYorkRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link80-NYCRouter"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>961c8f2b-7b0c-4b71-8393-2112c07d1c25</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-submit"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link92-unl-router-n1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>a71773a7-e669-454e-8be9-df434657c644</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link22-LARouter-ip-192-168-22-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.22.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link84-BostonRouter-ip-10-100-84-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.84.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-HartfordRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link82-HartfordRouter-ip-10-100-82-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-CharlotteRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link76-CharlotteRouter-ip-10-100-76-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#OriginFNAL">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-OriginFNAL"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MissoulaRouter"/>
    <topology:hasGUID>7efa4cb3-f641-44d0-82c3-7b4681446b27</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $FNALRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TucsonRouter">
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-TucsonRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link15-TucsonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-TucsonRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>64112d4f-1ded-4ad7-94f8-5a60ee191d5f</topology:hasGUID>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-SDRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-SDRouter-ip-10-100-40-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-EugeneRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-EugeneRouter-ip-10-100-30-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-UChicagoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-UChicagoRouter-ip-10-100-86-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-cache">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-cache-ip-192-168-73-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-router-n1-ip-192-168-73-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.73.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-compute-c1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-router-n1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>aec73c8a-6828-4f57-9a99-a7db16bf6561</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-CincinnatiRouter-ip-10-100-57-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.57.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PhillyRouter">
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link78-PhillyRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-PhillyRouter"/>
    <topology:hasGUID>179e6cee-baad-4123-902a-324ab0f573fe</topology:hasGUID>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#WashingtonRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-cache">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-cache"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0"/>
    <topology:hasGUID>30422893-7183-40c5-8704-f6956f0179c6</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#EugeneRouter">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link29-EugeneRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>7489ddff-875f-4e6e-a661-6a63d8e12351</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-EugeneRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SunnyvaleRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-LasVegasRouter-ip-10-100-34-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.34.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-HoustonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link27-HoustonRouter-ip-10-100-27-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#IndianapolisRouter">
    <topology:hasGUID>f9eb6b98-33f6-48e1-a615-f69f131dc777</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-IndianapolisRouter"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#ChicEQCHRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-IndianapolisRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-PittRouter-ip-10-100-88-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.88.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-SeattleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link0-SeattleRouter-ip-10-100-0-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MissoulaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link47-MissoulaRouter-ip-10-100-47-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-compute-c0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-router-n1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>1859b8d9-2553-4016-ad33-553538e9bde9</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-OriginFNAL">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link17-OriginFNAL-ip-192-168-17-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SDRouter">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link40-SDRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#TucsonRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link60-SDRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-SDRouter"/>
    <topology:hasGUID>ec1ee835-484e-4c2b-864e-df7d7d8814f8</topology:hasGUID>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheFNAL">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-CacheFNAL"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#FNALRouter"/>
    <topology:hasGUID>8f562208-6182-4ba7-a610-1e7cb49be647</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $FNALRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-router-n1-ip-192-168-74-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.74.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-SaltLakeRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link34-SaltLakeRouter-ip-10-100-34-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NewYorkRouter-ip-10-100-81-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.81.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-router-n2-ip-192-168-26-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.26.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-AtlantaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link71-AtlantaRouter-ip-10-100-71-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheSeattle">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-CacheSeattle"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SeattleRouter"/>
    <topology:hasGUID>0dbbd149-a561-4e05-8a97-5b36265254f1</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $SeattleRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uafvmsite.rdf#uafvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-router-n2-ip-192-168-25-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.25.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-HartfordRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-HartfordRouter-ip-10-100-83-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-staging-ip-192-168-69-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.69.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-CacheNYU-ip-192-168-4-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.4.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link91-unl-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1"/>
    <topology:hasGUID>67e3ebb7-36f7-408a-892b-9a102b5b51e4</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link83-BostonRouter-ip-10-100-83-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.83.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-TulsaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-TulsaRouter-ip-10-100-48-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link20-AlbanyRouter-ip-172-16-20-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.20.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LasVegasRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link33-LasVegasRouter-ip-10-100-33-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-LouisvilleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link56-LouisvilleRouter-ip-10-100-56-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-PortlandRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-PortlandRouter-ip-10-100-8-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link74-unl-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1"/>
    <topology:hasGUID>6e4e48ee-c161-49a5-bf33-99aa07d06cb1</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-AlbanyRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link85-AlbanyRouter-ip-10-100-85-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-KansasCityRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-KansasCityRouter-ip-10-100-48-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link90-unl-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1"/>
    <topology:hasGUID>75c6381b-3b57-4a88-9b5e-aad14af1dabd</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link72-unl-router-n1-ip-172-16-72-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link70-ucsd-compute-c1-ip-192-168-70-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-submit-ip-192-168-66-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.66.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-SeattleRouter-ip-10-100-8-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.8.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-TulsaRouter-ip-10-100-48-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.48.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#UChicagoRouter">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-UChicagoRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#MinneapolisRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-UChicagoRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <topology:hasGUID>48e3f333-0242-4e4c-a604-7067eeecaf79</topology:hasGUID>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link86-UChicagoRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-UChicagoRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-UChicagoRouter"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link57-IndianapolisRouter-ip-10-100-57-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.57.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link46-uc-router-n0-ip-172-16-46-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.46.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-router-n0-ip-192-168-45-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.45.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-PensacolaRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-PensacolaRouter-ip-10-100-52-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#BatonRougeRouter">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasGUID>8a96874d-21ec-4f2c-b375-9e3f4ca72977</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link52-BatonRougeRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-BatonRougeRouter"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#HoustonRouter"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#PittRouter">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AshburnRouter"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-PittRouter"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 8
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 8
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-PittRouter"/>
    <topology:hasGUID>a0befd31-3c74-469b-a30d-4466f5ba9c2f</topology:hasGUID>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-CharlotteRouter-ip-10-100-75-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.75.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link50-DallasRouter-ip-10-100-50-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.50.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link19-syr-staging-ip-192-168-19-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.19.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-ChicEQCHRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link61-ChicEQCHRouter-ip-10-100-61-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#DenverRouter">
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 4
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
mkdir -p /root/iris
cp -r /root/chaos-jungle/experiment/testdata /root/iris
cp chaos-jungle/experiment/v1/000-default.conf /etc/apache2/sites-available
mkdir -p /var/www/iris
service apache2 reload
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-DenverRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link7-DenverRouter"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#SaltLakeRouter"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link2-DenverRouter"/>
    <topology:hasGUID>32eb38f5-294b-4599-8de2-69a485881f7c</topology:hasGUID>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-UChicagoRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link62-UChicagoRouter-ip-10-100-62-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-CacheSeattle">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link24-CacheSeattle-ip-192-168-24-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link39-uc-compute-c1-ip-192-168-39-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.39.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link64-MinneapolisRouter-ip-10-100-64-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.64.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link25-syr-cache-ip-192-168-25-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.25.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-TucsonRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link13-TucsonRouter-ip-10-100-13-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-ChicEQCHRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link58-ChicEQCHRouter-ip-10-100-58-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-cache">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link45-uc-cache-ip-192-168-45-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-CharlotteRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-CharlotteRouter-ip-10-100-75-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link43-uc-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#uc-router-n0"/>
    <topology:hasGUID>d5e7e634-af86-47e8-a225-27f9d29db7a2</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link69-ucsd-router-n3-ip-192-168-69-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.69.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link30-EugeneRouter-ip-10-100-30-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.30.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link11-SeattleRouter-ip-192-168-11-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.11.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-SunnyvaleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link37-SunnyvaleRouter-ip-10-100-37-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-router-n2"/>
    <topology:hasGUID>62a670e9-a260-43ce-ad7d-ca09cc5ab2f8</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#CacheNYU">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link4-CacheNYU"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#NewYorkRouter"/>
    <topology:hasGUID>cc0bf3bf-c781-4b5b-aadd-c450b624b5d2</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $NewYorkRouter.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-router-n2-ip-192-168-18-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.18.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-LARouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link38-LARouter-ip-10-100-38-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link16-FNALRouter-ip-192-168-16-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.16.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link8-PortlandRouter-ip-10-100-8-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.8.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link48-KansasCityRouter-ip-10-100-48-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.48.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link42-uc-compute-c0-ip-192-168-42-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.42.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link88-AshburnRouter-ip-10-100-88-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.88.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-cache">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link73-unl-cache"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#unl-router-n1"/>
    <topology:hasGUID>b1444c97-6016-4e20-8b30-384904476490</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/uhvmsite.rdf#uhvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link26-syr-compute-c0-ip-192-168-26-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link81-NYCRouter-ip-10-100-81-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.81.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link23-CacheCal-ip-192-168-23-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.23.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link1-DenverRouter-ip-10-100-1-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.1.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-LouisvilleRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link55-LouisvilleRouter-ip-10-100-55-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link51-HoustonRouter-ip-10-100-51-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.51.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#syr-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#AlbanyRouter"/>
    <topology:hasGUID>86a52c7a-95da-4fe8-8b1d-2b7b1f355715</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6


echo "following are for chaos-jungle and saltstack" &gt;&gt; /root/tmp

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <request-schema:inDomain rdf:resource="http://geni-orca.renci.org/owl/unfvmsite.rdf#unfvmsite/Domain"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link79-NYCRouter-ip-10-100-79-1">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.79.1</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link66-ucsd-submit-ip-192-168-66-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link28-HoustonRouter-ip-10-100-28-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.28.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Ubuntu+18.04+QCOW2+v1.0.2">
    <topology:hasName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">Ubuntu 18.04 QCOW2 v1.0.2</topology:hasName>
    <topology:hasURL>http://geni-images.renci.org/images/standard/ubuntu-comet/ubuntu-18.04/ubuntu-18.04.xml</topology:hasURL>
    <topology:hasGUID>fe66b08bffa14c385ad64edd124350a2da826af9</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#DiskImage"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link75-AtlantaRouter-ip-10-100-75-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.75.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-MinneapolisRouter">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link5-MinneapolisRouter-ip-10-100-5-1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link18-syr-compute-c1-ip-192-168-18-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.18.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-Cleveland">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/2078d23a-3bdf-496b-8126-e0e12466abf8#Link87-Cleveland-ip-10-100-87-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
</rdf:RDF>
