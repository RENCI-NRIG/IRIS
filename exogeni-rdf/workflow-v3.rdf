<rdf:RDF
    xmlns:ec2="http://geni-orca.renci.org/owl/ec2.owl#"
    xmlns:kansei="http://geni-orca.renci.org/owl/kansei.owl#"
    xmlns:app-color="http://geni-orca.renci.org/owl/app-color.owl#"
    xmlns:geni="http://geni-orca.renci.org/owl/geni.owl#"
    xmlns:domain="http://geni-orca.renci.org/owl/domain.owl#"
    xmlns:eucalyptus="http://geni-orca.renci.org/owl/eucalyptus.owl#"
    xmlns:collections="http://geni-orca.renci.org/owl/collections.owl#"
    xmlns:openflow="http://geni-orca.renci.org/owl/openflow.owl#"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
    xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
    xmlns:request="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#"
    xmlns:exogeni="http://geni-orca.renci.org/owl/exogeni.owl#"
    xmlns:layer="http://geni-orca.renci.org/owl/layer.owl#"
    xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
    xmlns:request-schema="http://geni-orca.renci.org/owl/request.owl#"
    xmlns:ip4="http://geni-orca.renci.org/owl/ip4.owl#"
    xmlns:planetlab="http://geni-orca.renci.org/owl/planetlab.owl#"
    xmlns:ethernet="http://geni-orca.renci.org/owl/ethernet.owl#"
    xmlns:dtn="http://geni-orca.renci.org/owl/dtn.owl#"
    xmlns:time="http://www.w3.org/2006/time#"
    xmlns:owl="http://www.w3.org/2002/07/owl#"
    xmlns:modify-schema="http://geni-orca.renci.org/owl/modify.owl#"
    xmlns:compute="http://geni-orca.renci.org/owl/compute.owl#"
    xmlns:topology="http://geni-orca.renci.org/owl/topology.owl#"
    xmlns:orca="http://geni-orca.renci.org/owl/orca.rdf#" > 
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-esnet">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-esnet-ip-10-100-7-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-submit-ip-192-168-28-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.28.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-router-n3-ip-192-168-21-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.21.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-compute-c1-ip-192-168-24-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-starlight-ip-10-100-6-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.6.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#internet2">
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-internet2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-internet2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-internet2"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp



</request-schema:postBootScript>
    <topology:hasGUID>db50f928-5e59-4bb0-bf70-a82f85c4a4c6</topology:hasGUID>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-internet2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-staging"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>23b03bd1-4141-4f31-98e3-a45c0335ec2b</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-submit-ip-192-168-13-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-internet2-ip-172-16-14-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.14.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-uc-router-n0-ip-172-16-12-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-router-n2">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-router-n2"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-router-n2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-router-n2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasGUID>948c8a82-78e6-4108-986c-79a141f0def1</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-router-n2"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#starlight"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp


</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-syr-router-n2"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-esnet">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-esnet-ip-10-100-2-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-submit"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-router-n3"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>405a05ea-0433-45a7-b258-19a3144f4562</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-router-n3">
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#esnet"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-ucsd-router-n3"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp



</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-router-n3"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <topology:hasGUID>91f8b495-4dc9-4fae-93c6-8fa50abbbcda</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-router-n3"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-compute-c1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2117c3d3-af4a-41b2-aaed-2cc950f73e6c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-uc-router-n0-ip-172-16-12-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.12.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-internet2-ip-10-100-6-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.6.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-compute-c0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>f4ee18b8-69dc-4ccd-b89e-283a33fb0ed2</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-starlight">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-starlight-ip-172-16-24-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-router-n3-ip-192-168-22-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.22.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-esnet-ip-172-16-22-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.22.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-compute-c0-ip-192-168-23-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#">
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-router-n1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#control"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#cenic"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#internet2"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13"/>
    <request-schema:hasTerm rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Term"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#starlight"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/request.owl#Reservation"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-staging"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#esnet"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-router-n3"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-router-n0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-submit"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-compute-c0"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-router-n2"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-compute-c1"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10"/>
    <collections:element rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-submit"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-compute-c0-ip-192-168-20-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-compute-c1-ip-192-168-25-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-cenic">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-cenic-ip-172-16-12-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-internet2-ip-10-100-0-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.0.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-router-n3-ip-192-168-24-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#control">
    <topology:hasGUID>4a481e30-95e1-488a-ac36-2eca4f6c65a3</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

cd /root
git clone -b storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git

wget -O - https://repo.saltstack.com/py3/ubuntu/18.04/amd64/latest/SALTSTACK-GPG-KEY.pub | sudo apt-key add -
echo "deb http://repo.saltstack.com/py3/ubuntu/18.04/amd64/latest bionic main" &gt; /etc/apt/sources.list.d/saltstack.list
apt-get -y update

until apt-get -y install salt-master
do
        echo "installing salt-master" &gt;&gt; /root/tmp
        sleep 5s
done

echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash

while !(salt-key -L | grep cenic) || !(salt-key -L | grep internet2) || !(salt-key -L | grep esnet) ||  !(salt-key -L | grep starlight) || !(salt-key -L | grep syr-router-n2) || !(salt-key -L | grep unl-router-n1) || !(salt-key -L | grep ucsd-router-n3) || !(salt-key -L | grep uc-router-n0) || !(salt-key -L | grep syr-compute-c1) || !(salt-key -L | grep syr-compute-c0) || !(salt-key -L | grep unl-compute-c1) || !(salt-key -L | grep unl-compute-c0) || !(salt-key -L | grep ucsd-compute-c1) || !(salt-key -L | grep ucsd-compute-c0) || !(salt-key -L | grep uc-compute-c0) || !(salt-key -L | grep uc-compute-c1) || !(salt-key -L | grep uc-staging) || !(salt-key -L | grep uc-submit) || !(salt-key -L | grep syr-staging) || !(salt-key -L | grep syr-submit) || !(salt-key -L | grep ucsd-staging) || !(salt-key -L | grep ucsd-submit) || !(salt-key -L | grep unl-staging) || !(salt-key -L | grep unl-submit) 
do
sleep 5s
echo "saltstack not ready, sleep 5s" &gt;&gt; /root/tmp
done

sleep 1m
salt-key -L &gt;&gt; /root/tmp
salt-key -y -A &gt;&gt; /root/tmp
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-router-n1-ip-192-168-16-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.16.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-staging"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>fc866b42-1d57-477e-805e-c70630913039</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-router-n2"/>
    <topology:hasGUID>e24d5d98-b283-41bf-a03c-29d7bebc05af</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-router-n1"/>
    <topology:hasGUID>67dee29f-bfc9-40e7-89a5-acdba3756941</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-ucsd-router-n3"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-esnet"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d03533d3-a1e5-41d5-822e-76bb2dfa3f45</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-router-n3-ip-192-168-23-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.23.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-cenic">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-cenic-ip-10-100-0-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-esnet">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-esnet-ip-172-16-22-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-submit"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>5e53a2f2-2e33-4749-bbb2-400fdc5afce4</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-unl-router-n1-ip-172-16-14-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.14.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-router-n2-ip-192-168-26-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.26.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-router-n2-ip-192-168-26-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-router-n0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-uc-router-n0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-router-n0"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-router-n0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-router-n0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#cenic"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-router-n0"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp


</request-schema:postBootScript>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasGUID>1c2295a6-6013-487f-b0d3-590697acb8b2</topology:hasGUID>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-router-n0-ip-192-168-20-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.20.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-staging-ip-192-168-27-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-router-n0-ip-192-168-17-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-router-n0-ip-192-168-18-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.18.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-esnet"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-internet2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>e7404f1b-d273-4148-a896-ce7eb77bcc88</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-starlight-ip-10-100-9-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.9.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-staging-ip-192-168-27-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.27.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-router-n0"/>
    <topology:hasGUID>73bcde27-95bb-4486-83b4-c5d1e89c4dec</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-ucsd-router-n3-ip-172-16-22-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-router-n2-ip-192-168-25-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-internet2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-internet2-ip-10-100-2-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-compute-c1-ip-192-168-17-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.17.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-compute-c1-ip-192-168-24-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.24.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-staging"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-router-n3"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>2b2e2227-d0e1-4dd3-b599-52058dc6f9fc</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-router-n1-ip-192-168-15-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-submit-ip-192-168-21-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.21.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-router-n3-ip-192-168-21-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-router-n0"/>
    <topology:hasGUID>7dcd580d-3400-4b95-befc-d8c7b3bf928c</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp


</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-esnet-ip-10-100-7-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.7.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-compute-c0-ip-192-168-26-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.26.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-submit-ip-192-168-18-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.18.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-submit-ip-192-168-21-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-esnet"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-cenic"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>a0010898-24ac-4142-8099-c10dead2c006</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-staging-ip-192-168-22-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.22.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-staging-ip-192-168-19-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-router-n3"/>
    <topology:hasGUID>d62abb52-6bf4-4dc3-ba2d-cb108dbd8a60</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-staging-ip-192-168-22-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-cenic-ip-10-100-0-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.0.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-router-n0"/>
    <topology:hasGUID>e236ae82-508c-4f19-89c9-a82f053dc7c8</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-router-n2-ip-192-168-25-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.25.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-starlight">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-starlight-ip-10-100-7-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-compute-c1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-router-n1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d081ee9c-ecb7-4c8c-bb7e-e14198ffc393</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-router-n2-ip-192-168-28-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-submit"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>79cb6d05-b6f2-4b0d-aa48-df38a443c8d7</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-cenic-ip-172-16-12-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.12.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-internet2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-internet2-ip-10-100-0-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-starlight-ip-172-16-24-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.24.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-starlight-ip-10-100-7-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.7.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-cenic"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-starlight"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>da3c4fda-307f-4f56-bc56-a3c27d8b506c</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-compute-c1-ip-192-168-17-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-submit-ip-192-168-28-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-cenic"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-internet2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>7e633108-9a86-407b-867b-51d7a6335350</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-esnet">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-esnet-ip-10-100-1-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-router-n1-ip-192-168-13-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link17-ucsd-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-router-n3"/>
    <topology:hasGUID>13683c9d-bf5b-4ea1-81a5-aab8ed5c1075</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-router-n1-ip-192-168-15-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.15.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-router-n3"/>
    <topology:hasGUID>11bc650b-5479-4e96-8708-a0260fba5c70</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-esnet-ip-10-100-1-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.1.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-router-n1"/>
    <topology:hasGUID>79dad62c-2adc-4e08-8859-f5b9d907f34e</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-submit-ip-192-168-13-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.13.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-compute-c0-ip-192-168-20-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.20.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-compute-c1"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>4ac2ec51-ad35-482c-9274-7a7e7278e2c2</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-compute-c1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-router-n3"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3519bcc8-1fba-4b88-82f9-fb98c0b70028</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-router-n2-ip-192-168-28-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.28.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link13-ucsd-router-n3-ip-192-168-24-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.24.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#uc-router-n0"/>
    <topology:hasGUID>086eab16-57d8-431d-a874-de91d2b91898</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $uc-router-n0.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-submit"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>42ec16d1-c6be-4fa7-a31f-7cba9c23325b</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#cenic">
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp


</request-schema:postBootScript>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-cenic"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasGUID>f458477e-42a1-43fe-a84b-5b7e084b85a8</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-cenic"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-cenic"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link0-cenic"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-starlight">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-starlight-ip-10-100-9-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#starlight">
    <topology:hasGUID>4cf9a77e-76eb-4e04-84ba-878acaabb046</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-starlight"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-starlight"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-starlight"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-starlight"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-internet2-ip-10-100-2-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.2.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-router-n3-ip-192-168-22-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2">
    <topology:hasName rdf:datatype="http://www.w3.org/2001/XMLSchema#string">Ubuntu 18.04 QCOW2 v1.0.2</topology:hasName>
    <topology:hasURL>http://geni-images.renci.org/images/standard/ubuntu-comet/ubuntu-18.04/ubuntu-18.04.xml</topology:hasURL>
    <topology:hasGUID>fe66b08bffa14c385ad64edd124350a2da826af9</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#DiskImage"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-router-n1-ip-192-168-14-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-router-n3">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-router-n3-ip-192-168-23-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-compute-c0-ip-192-168-15-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-compute-c1-ip-192-168-16-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.16.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-starlight">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-starlight-ip-10-100-6-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-staging">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-staging-ip-192-168-14-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-internet2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>98acaf82-8b45-48ab-909d-6162766ed25a</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-router-n2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-compute-c0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>c4591e03-a952-4d1b-a2f5-f39198744dff</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-router-n1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-router-n1"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-router-n1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#internet2"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-unl-router-n1"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasGUID>1f8f869b-97c8-4553-a182-8fcdc3464123</topology:hasGUID>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-syr-router-n2-ip-172-16-24-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-esnet"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-starlight"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>370fd319-bc91-405e-8ff0-a01bc965e055</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Term">
    <time:hasDurationDescription rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#TermDuration"/>
    <rdf:type rdf:resource="http://www.w3.org/2006/time#Interval"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-internet2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-internet2-ip-172-16-14-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-router-n0-ip-192-168-19-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.19.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-compute-c1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-compute-c1-ip-192-168-16-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link25-syr-compute-c1-ip-192-168-25-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.25.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-cenic-ip-10-100-9-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.9.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link15-ucsd-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#ucsd-router-n3"/>
    <topology:hasGUID>d1558d77-ec76-43fe-87c3-5c95c857f3e5</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $ucsd-router-n3.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-syr-router-n2-ip-172-16-24-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.24.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-router-n2"/>
    <topology:hasGUID>8f562208-6182-4ba7-a610-1e7cb49be647</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-compute-c0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-router-n3"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>3a588cf0-65d6-44e2-a9b1-1f6f15bb79ac</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-submit">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link20-syr-submit"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-router-n2"/>
    <topology:hasGUID>02a9deae-587a-4dc7-a962-a259fa76b2f2</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-router-n1"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-compute-c0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>446bb999-57a5-4c39-8905-184356e46130</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-compute-c0">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-compute-c0"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-router-n1"/>
    <topology:hasGUID>e9f6086a-f3fc-41b5-ad33-deeecbb0ee7b</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link3-uc-router-n0-ip-192-168-20-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-submit">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-submit-ip-192-168-18-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-internet2"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-starlight"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>d6c3f259-fdf4-4901-8500-08bb255a8c25</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-router-n0-ip-192-168-19-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-router-n1-ip-192-168-16-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-staging"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-router-n0"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>8975a27a-f6f8-44f4-831b-1c984d1a470d</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link8-unl-router-n1-ip-192-168-13-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.13.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-staging">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-staging"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#syr-router-n2"/>
    <topology:hasGUID>bf3d1cdf-a7a6-442b-ba10-d5fdecde83a8</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $syr-router-n2.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
git clone https://github.com/RENCI-NRIG/IRIS.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp
</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-router-n1-ip-192-168-14-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.14.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-router-n2-ip-192-168-27-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.27.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link11-unl-compute-c0-ip-192-168-15-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.15.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link10-unl-staging-ip-192-168-14-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.14.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link23-ucsd-compute-c0-ip-192-168-23-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.23.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#TermDuration">
    <time:days rdf:datatype="http://www.w3.org/2001/XMLSchema#decimal">1</time:days>
    <rdf:type rdf:resource="http://www.w3.org/2006/time#DurationDescription"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-starlight"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link24-syr-router-n2"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>1beae374-452b-4222-91c2-565cb24b7d25</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-compute-c0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link26-syr-compute-c0-ip-192-168-26-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-uc-router-n0"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link12-cenic"/>
    <layer:atLayer rdf:resource="http://geni-orca.renci.org/owl/ethernet.owl#EthernetNetworkElement"/>
    <layer:bandwidth rdf:datatype="http://www.w3.org/2001/XMLSchema#integer">10000000</layer:bandwidth>
    <topology:hasGUID>9eb13431-d4cf-46a3-8790-704b37c241ae</topology:hasGUID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#NetworkConnection"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-cenic-ip-10-100-1-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.1.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-router-n0">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link18-uc-router-n0-ip-192-168-18-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-compute-c1">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link16-unl-compute-c1"/>
    <request-schema:dependOn rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#unl-router-n1"/>
    <topology:hasGUID>9ae9e32e-45b5-4d45-bbed-8319028fb63a</topology:hasGUID>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash
  
#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )
echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#set ( $link = $linkset[0] )
echo $link &gt; /root/tmp
#set ( $gw = $unl-router-n1.IP($link) )
echo $gw &gt; /root/tmp

while ! ping -c 1 -n -w 1 $gw &amp;&gt; /dev/null
do
    echo "ping gw...." &gt;&gt; /root/tmp
    sleep 2
done
echo "\n%s\n"  "Server is back online" &gt;&gt; /root/tmp

ip route add 10.100.0.0/16 via $gw dev ens6
ip route add 172.16.0.0/16 via $gw dev ens6
ip route add 192.168.0.0/16 via $gw dev ens6

#set ( $hostname = $self.Name() )
echo $hostname:$gw &gt; /root/tmp_gw
#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOLarge"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-cenic">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link9-cenic-ip-10-100-9-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-cenic">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-cenic-ip-10-100-1-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#esnet">
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link7-esnet"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-esnet"/>
    <domain:hasResourceType rdf:resource="http://geni-orca.renci.org/owl/compute.owl#VM"/>
    <request-schema:postBootScript rdf:datatype="http://www.w3.org/2001/XMLSchema#string">#!/bin/bash

echo ! &gt; /root/tmp
#wait for Internet
while ! ping -c1 127.0.0.53 &amp;&gt;/dev/null
        do echo "Ping Fail" &gt;&gt; /root/tmp
        sleep 2
done
echo "Internet is ready" &gt;&gt; /root/tmp

#Install Quagaa
until apt-get update -y
do
        echo "updating Ubunut...." &gt;&gt; /root/tmp
        sleep 2
done
until apt-get install -y quagga
do
        echo "installing quagga...." &gt;&gt; /root/tmp
        sleep 2
done

echo 'VTYSH_PAGER=more' &gt;&gt;/etc/environment 
echo 'export VTYSH_PAGER=more' &gt;&gt;/etc/bash.bashrc

#cp /usr/share/doc/quagga/examples/zebra.conf.sample /etc/quagga/zebra.conf
#cp /usr/share/doc/quagga/examples/ospfd.conf.sample /etc/quagga/ospfd.conf

#set ( $linkset = $self.Links()  )
#set ( $linksetstr = $self.AllLinks()  )
#set ( $num = $linkset.size() )
#set ( $numIntf = $num + 2 )

echo $linkset &gt;&gt; /root/tmp
echo $linksetstr &gt;&gt; /root/tmp

#wait for interfaces
echo $numIntf &gt;&gt; /root/tmp
size=0
while [ $size -lt $numIntf ]
do
filelist=( $(ls /etc/udev/rules.d) )
size="${#filelist[@]}"
done
echo $size $numIntf &gt;&gt; /root/tmp

#ospfd.conf
echo ! &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $ospfLink in $linkset )
#set ( $mac = $self.MAC( $ospfLink ) )
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
ospfIntf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $ospfIntf &gt;&gt; /root/tmp
echo interface $ospfIntf &gt;&gt; /etc/quagga/ospfd.conf
fi
done
#end

echo router ospf &gt;&gt; /etc/quagga/ospfd.conf
#foreach ( $link in $linkset )
  #set ( $IP=$self.IP($link) ) 
  #set ( $MASK=$self.Netmask($link) )
  IFS=. read -r i1 i2 i3 i4 &lt;&lt;&lt; $IP
  #if ( $MASK == "/24" )
    SUBNET="$i1.$i2.$i3.0"
  #end
  #if ( $MASK == "/16" )
    SUBNET="$i1.$i2.0.0"
  #end
  echo  network $SUBNET$MASK area 0 &gt;&gt; /etc/quagga/ospfd.conf
#end
echo line vty &gt;&gt; /etc/quagga/ospfd.conf

#zebra.conf

echo ! &gt; /etc/quagga/zebra.conf

#foreach ( $zebralink in $linkset )
#set ( $IP=$self.IP( $zebralink ) )
#set ( $MASK=$self.Netmask( $zebralink ) )
#set ( $mac = $self.MAC( $zebralink ) )
echo $IP$MASK $mac  &gt;&gt; /root/tmp
for file in /etc/udev/rules.d/*
do
if grep -q $mac $file
then
echo $file &gt;&gt; /root/tmp
intf=$(cat $file | sed -n -e 's/^\(.*\)\(ens[0-9]*\)\(.*\)/\2/p' )
echo $intf &gt;&gt; /root/tmp
echo interface $intf &gt;&gt; /etc/quagga/zebra.conf
fi
done
echo ip address $IP$MASK &gt;&gt; /etc/quagga/zebra.conf
#end
echo ip forwarding &gt;&gt; /etc/quagga/zebra.conf

#start zebra and ospfd

systemctl enable zebra
systemctl start zebra
systemctl enable ospfd
systemctl start ospfd

#foreach ( $link2 in $linkset )
  #set ( $IP=$self.IP($link2) )
  echo export $self.Name()_$link2="$IP" &gt;&gt; /root/tmp_links.sh
#end

echo "Installing CJ and apache2" &gt;&gt; /root/tmp
cd /root
git clone --branch storage https://github.com/RENCI-NRIG/chaos-jungle.git
date &gt;&gt; /root/tmp
until apt-get -y install apache2
do
        echo "installing apache2" &gt;&gt; /root/tmp
        sleep 2
done
date &gt;&gt; /root/tmp
apt-key adv --keyserver keyserver.ubuntu.com --recv-keys 4052245BD4284CDD
echo "deb https://repo.iovisor.org/apt/$(lsb_release -cs) $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/iovisor.list
apt-get -y update
apt-get -y install bcc-tools libbcc-examples linux-headers-$(uname -r)
apt-get -y install python3-bcc
apt-get -y install python3-pyroute2 python-pyroute2 iperf3
apt install -y python3-pip python3-setuptools
pip3 install python-crontab  
date &gt;&gt; /root/tmp
python3 /root/chaos-jungle/storage/cj_storage.py --revert &gt;&gt; /root/tmp
echo "start saltstack" &gt;&gt; /root/tmp
curl https://raw.githubusercontent.com/RENCI-NRIG/IRIS/master/saltstack/bootstrap.sh | bash
echo "done" &gt;&gt; /root/tmp

</request-schema:postBootScript>
    <compute:diskImage rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Ubuntu+18.04+QCOW2+v1.0.2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/compute.owl#ComputeElement"/>
    <compute:specificCE rdf:resource="http://geni-orca.renci.org/owl/exogeni.owl#XOMedium"/>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-esnet"/>
    <topology:hasGUID>32eb38f5-294b-4599-8de2-69a485881f7c</topology:hasGUID>
    <topology:hasInterface rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link1-esnet"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-unl-router-n1">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link14-unl-router-n1-ip-172-16-14-3"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link2-esnet-ip-10-100-2-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>10.100.2.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link4-uc-router-n0-ip-192-168-17-2">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.17.2</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link22-ucsd-router-n3-ip-172-16-22-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>172.16.22.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link19-uc-staging-ip-192-168-19-3">
    <ip4:netmask>255.255.255.0</ip4:netmask>
    <layer:label_ID>192.168.19.3</layer:label_ID>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/ip4.owl#IPAddress"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-internet2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link6-internet2-ip-10-100-6-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
  <rdf:Description rdf:about="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-router-n2">
    <ip4:localIPAddress rdf:resource="http://geni-orca.renci.org/owl/26067db0-2e26-4361-825d-904fe0968bbd#Link21-syr-router-n2-ip-192-168-27-2"/>
    <rdf:type rdf:resource="http://geni-orca.renci.org/owl/topology.owl#Interface"/>
  </rdf:Description>
</rdf:RDF>
